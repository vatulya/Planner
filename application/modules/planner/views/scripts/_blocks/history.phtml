<?php
    /*** PREPARE DATA ***/
    $headerWeeks         = '';
    $historyRows         = array();
    $emptyRow            = '';
    foreach ($this->historyDateWeekYear as $week => $year) {
        $date = date('Y-m-d', strtotime($year . 'W' . $week));

        $headerWeeks         .= '<th>
            <a href="' . $this->url(array('action' => 'get-week-details'), 'planner', true). '" class="no-action get-week-details" data-year="' . $year . '" data-week="' . $week . '" title="' . $date . '">
                Week ' . $week . '
            </a>
        </th>';

        $emptyRow            .= '<td>&nbsp;</td>';
    }
?>

<table class="history table table-bordered table-condensed table-striped" style="width: 300px; margin-right: 20px; float: left;">
    <thead>
    <tr class="week-table-header">
        <?php echo $headerWeeks; ?>
    </tr>
    <tr  style="background-color: #<?php echo $this->group['color'];?>" class="week-table-header">
        <?php echo $emptyRow; ?>
    </tr>
    </thead>
    <tbody>
    <?php if (empty($this->users)): ?>
    <td colspan="4" class="user-not-found">
        No users history
    </td>
    <?php else: ?>
    <?php foreach($this->users as $week => $row): ?>
    <tr>
        <?php foreach($row['history'] as $week => $workTime): ?>
        <td><?php echo $workTime; ?></td>
        <?php endforeach; ?>
    </tr>
    <?php endforeach; ?>
    <?php endif; ?>
    </tbody>
</table>
